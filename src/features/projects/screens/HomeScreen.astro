---
import Heading from '@/components/Heading.astro';
import SkillCard from '@/components/SkillCard.astro';
import { buttonVariants } from '@/components/ui/button';
import type { LanguageCode } from '@/i18n/ui';
import { getRelativeLocaleUrl } from 'astro:i18n';
import { Calendar, Dumbbell } from 'lucide-react';

import heroImage from '@/assets/user-hero.webp';
import { Image } from 'astro:assets';
import FeaturedProjectPreview from '../components/FeaturedProjectPreview.astro';
import type { TranslatedProject, TranslatedSkill } from '../type';

export type Props = {
  lang: LanguageCode;
  projects: Array<TranslatedProject>;
  skills: Array<TranslatedSkill>;
  heroGreeting: string;
  heroSubtitlePart1: string;
  heroSubtitlePart2: string;
  heroIntroduction: string;
  heroViewWorkButton: string;
  heroContactButton: string;
  imageNotAvailable: string;
  featuredProjectsTitle: string;
  featuredProjectsDescription: string;
  mySkillsTitle: string;
  mySkillsDescription: string;
  projectPreviewCtaText: string; // Added for specific project CTA
};

const {
  lang,
  projects,
  skills,
  heroGreeting,
  heroSubtitlePart1,
  heroSubtitlePart2,
  heroIntroduction,
  heroViewWorkButton,
  heroContactButton,
  imageNotAvailable,
  featuredProjectsTitle,
  featuredProjectsDescription,
  mySkillsTitle,
  mySkillsDescription,
  projectPreviewCtaText,
} = Astro.props;
---

<section class="py-4 md:py-8">
  <div class="grid md:grid-cols-2 gap-12 items-stretch min-h-[60vh]">
    {/* Hero Text Column */}
    <div class="flex flex-col justify-center h-full text-center md:text-left">
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-4">
        Hi, Iâ€™m Nicholas ðŸ‘‹
      </h1>
      <p class="text-2xl md:text-3xl font-medium text-muted-foreground mb-2">
        Quant researcher & engineer <span class="text-primary">|</span> Data, markets & code
      </p>
      <p class="text-lg text-muted-foreground mb-8">
        Exploring the edges of alpha, one model at a time.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start mb-8">
        <a href="/projects" class={buttonVariants({ variant: 'default', size: 'lg' })}>
          <Dumbbell className="mr-2 size-4" />
          View My Work
        </a>
        <a href={getRelativeLocaleUrl(lang, '/contact')} class={buttonVariants({ variant: 'outline', size: 'lg' })}>
          <Calendar className="mr-2 size-4" />
          Get In Touch
        </a>
      </div>
      {/* About Me Section with Socials */}
      <div class="bg-muted rounded-lg p-6 shadow flex flex-col md:flex-row items-center gap-4 md:gap-8 max-w-xl mx-auto md:mx-0">
        <div class="flex-shrink-0">
          <img src="/assets/user-hero.webp" alt="Nicholas Hong profile photo" class="w-20 h-20 rounded-full border-2 border-primary object-cover bg-background" />
        </div>
        <div class="flex-1 text-left">
          <h2 class="text-xl font-semibold mb-1">About Me</h2>
          <p class="text-muted-foreground mb-2">
            I design and test systematic trading strategies â€” Always refining, always iterating.
          </p>
          <div class="flex gap-3 mt-2">
            <a href="https://linkedin.com/in/nicholas-hong001" target="_blank" rel="noopener" aria-label="LinkedIn" class="hover:text-primary">
              {/* LinkedIn SVG */}
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-10h3v10zm-1.5-11.268c-.966 0-1.75-.784-1.75-1.75s.784-1.75 1.75-1.75 1.75.784 1.75 1.75-.784 1.75-1.75 1.75zm15.5 11.268h-3v-5.604c0-1.337-.025-3.063-1.868-3.063-1.868 0-2.154 1.459-2.154 2.967v5.7h-3v-10h2.881v1.367h.041c.401-.761 1.379-1.563 2.841-1.563 3.04 0 3.601 2.002 3.601 4.604v5.592z"/>
              </svg>
            </a>
          
            <a href="https://github.com/Nicholashsw" target="_blank" rel="noopener" aria-label="GitHub" class="hover:text-primary">
              {/* GitHub SVG */}
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577 
                0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.415-4.042-1.415-.546-1.387-1.333-1.756-
                1.333-1.756-1.089-.745.084-.729.084-.729 1.205.084 1.84 1.236 1.84 1.236 1.07 
                1.834 2.809 1.304 3.495.997.108-.775.418-1.305.762-1.605-2.665-.305-5.466-1.334-
                5.466-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.523.117-3.176 0 
                0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 
                3.006.404 2.291-1.553 3.297-1.23 3.297-1.23.653 1.653.242 2.873.119 
                3.176.77.84 1.235 1.91 1.235 3.221 0 4.609-2.803 5.624-5.475 
                5.921.43.371.823 1.102.823 2.222 0 1.606-.014 2.898-.014 
                3.293 0 .322.216.694.825.576 4.765-1.588 8.199-6.084 
                8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
            </a>
          
            <a href="https://medium.com/@nhong001" target="_blank" rel="noopener" aria-label="Medium" class="hover:text-primary">
              {/* Medium SVG */}
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path d="M2.01 6.52c.02-.2-.06-.4-.22-.53l-1.6-1.93v-.29h4.97l3.85 8.44 3.38-8.44h4.78v.29l-1.37 
                1.32c-.12.09-.18.24-.15.39v11.34c-.03.15.03.3.15.39l1.34 1.32v.29h-6.79v-.29l1.39-
                1.35c.14-.14.14-.18.14-.39v-9.13l-3.89 10.16h-.53l-4.54-10.16v6.81c-.04.28.06.56.28.75l1.8 
                2.19v.29h-5.09v-.29l1.8-2.19c.22-.19.32-.47.28-.75v-8.19z"/>
              </svg>
            </a>
          
            <a href="mailto:nhong001@e.ntu.edu.sg" target="_blank" rel="noopener" aria-label="Email" class="hover:text-primary">
              {/* Outlook/Email SVG */}
              <svg width="24" height="24" fill="currentColor" viewBox="0 0 48 48">
                <path d="M6 10.5v27h8.25v-2.25H9.75V12.75h4.5V10.5H6zm10.5 0v27h25.5v-6H26.25V10.5H16.5zm3 3h6.75v10.5H19.5V13.5zm0 13.5h6.75v7.5H19.5v-7.5zm9.75-13.5h8.25v21h-8.25V13.5z"/>
              </svg>
            </a>
          </div>
          
        </div>
      </div>
    </div>
    {/* Hero Image */}
    <div class="flex items-center justify-center h-full md:text-center">
      <div class="md:w-[400px] w-full aspect-square bg-muted rounded-lg shadow-xl overflow-hidden flex items-center justify-center mx-auto">
        <Image
          src={heroImage}
          alt={'User profile image'}
          width={400}
          height={400}
          densities={[1, 1.5, 2]}
          quality="high"
          class="h-full w-full object-cover object-center"
          style="object-fit:cover;object-position:center;"
        />
      </div>
    </div>
  </div>
</section>

{/* Featured Projects Section */}
<section id="projects" class="py-12 md:py-16 bg-muted/20 dark:bg-muted/10">
  <Heading
    title={featuredProjectsTitle}
    description={featuredProjectsDescription}
    className="flex flex-col items-center"
  />

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {
      projects.slice(0, 3).map((project: TranslatedProject) => {
        return (
          <FeaturedProjectPreview
            lang={lang}
            slug={project.slug}
            title={project.title}
            imageUrl={project.imageUrl}
            imageAltText={project.imageAltText}
            ctaText={projectPreviewCtaText}
          />
        );
      })
    }
  </div>
</section>

{/* Skills Section */}
<section id="skills" class="py-12 md:py-16">
  <div class="container mx-auto px-4">
    <Heading
      title={mySkillsTitle}
      description={mySkillsDescription}
      className="flex flex-col items-center"
    />
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        skills.map((skill) => (
          <SkillCard
            title={skill.title}
            description={skill.description}
            iconName={skill.iconName}
            technologies={skill.technologies}
          />
        ))
      }
    </div>
  </div>
</section>
